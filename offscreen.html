<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Offscreen Document for Tag Copier</title>
</head>

<body>
    <script>
        chrome.runtime.onMessage.addListener(async(request, sender, sendResponse) => {
            if (request.action === "createTagFile") {
                try {
                    const blob = new Blob([request.tags], {
                        type: "text/plain"
                    });
                    const fileUrl = URL.createObjectURL(blob);
                    sendResponse({
                        status: "success",
                        fileUrl: fileUrl,
                    });
                } catch (error) {
                    console.error("Error creating text file in offscreen:", error);
                    sendResponse({
                        status: "error",
                        message: "Failed to create text file in offscreen",
                    });
                }
            }
        });
    </script>
</body>

</html>